// import Link from 'next/link'
import { Button } from '@/components/ui/button'
import React from 'react'
import { useScroll, motion, useTransform } from 'framer-motion'
import { cn } from '@/lib/utils'

const menuItems = [
    { name: 'what', href: '#proposition' },
    { name: 'how', href: '#how' },
    { name: 'where', href: '#cta' },
]

export const HeroHeader = () => {
    const [scrolled, setScrolled] = React.useState(false)
    const [isMounted, setIsMounted] = React.useState(false)
    const { scrollYProgress } = useScroll()

    // Background color and blur effect based on scroll position
    const background = useTransform(scrollYProgress, [0, 0.1], ['rgba(255,255,255,0)', 'rgba(255,255,255,0.1)'])
    const blur = useTransform(scrollYProgress, [0, 0.1], ['blur(0px)', 'blur(16px)'])

    // Handle initial client-side mounting
    React.useEffect(() => {
        setIsMounted(true)
    }, [])

    React.useEffect(() => {
        if (!isMounted) return

        const unsubscribe = scrollYProgress.on('change', (latest) => {
            setScrolled(latest > 0.05)
        })
        return () => unsubscribe()
    }, [scrollYProgress, isMounted])

    return (
        <header>
            <nav className="fixed z-20 w-full rounded-xl">
                {isMounted && (
                    <motion.div
                        className={cn('mt-8 max-w-9/10 mx-auto rounded-xl px-6 lg:px-12 duration-200', scrolled && 'mt-4')}
                        style={{
                            backgroundColor: background,
                            backdropFilter: blur,
                        }}
                        initial={false}
                        animate={false}
                        transition={{
                            duration: 0.5,
                            ease: "easeInOut"
                        }}
                    >
                        <div className="flex flex-wrap items-center justify-between py-3">
                            <div className="flex w-full items-center justify-between">
                                <a aria-label="home" className="flex items-center space-x-2" href="/">
                                    {/* SVG omitted for brevity */}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="227" height="43" viewBox="0 0 227 43" fill="none">
  <path d="M1.40381 39.084V14.568H7.01981V16.8H7.12781C8.54381 14.952 10.4038 14.028 12.7078 14.028C15.1078 14.028 17.0158 14.952 18.4318 16.8C19.8718 18.624 20.5918 20.952 20.5918 23.784C20.5918 26.76 19.8598 29.136 18.3958 30.912C16.9318 32.688 14.9878 33.576 12.5638 33.576C10.3078 33.576 8.56781 32.748 7.34381 31.092H7.27181V39.084H1.40381ZM11.0518 29.04C12.1798 29.04 13.0558 28.596 13.6798 27.708C14.3278 26.796 14.6518 25.56 14.6518 24C14.6518 22.368 14.3398 21.084 13.7158 20.148C13.0918 19.212 12.1678 18.744 10.9438 18.744C9.71981 18.744 8.77181 19.236 8.09981 20.22C7.42781 21.18 7.09181 22.44 7.09181 24C7.09181 25.512 7.43981 26.736 8.13581 27.672C8.83181 28.584 9.80381 29.04 11.0518 29.04ZM21.1279 33V14.568H26.7439V17.448H26.8519C28.0999 15.336 29.7799 14.28 31.8919 14.28C32.4439 14.28 32.8279 14.328 33.0439 14.424V19.464H32.8999C31.0759 19.2 29.6359 19.524 28.5799 20.436C27.5239 21.324 26.9959 22.752 26.9959 24.72V33H21.1279ZM39.2375 27.888C39.9095 28.896 40.8695 29.4 42.1175 29.4C43.3655 29.4 44.3255 28.896 44.9975 27.888C45.6935 26.88 46.0416 25.524 46.0416 23.82C46.0416 22.116 45.6935 20.76 44.9975 19.752C44.3255 18.72 43.3655 18.204 42.1175 18.204C40.8695 18.204 39.9095 18.708 39.2375 19.716C38.5655 20.724 38.2295 22.092 38.2295 23.82C38.2295 25.524 38.5655 26.88 39.2375 27.888ZM49.2455 30.804C47.4455 32.652 45.0815 33.576 42.1535 33.576C39.2255 33.576 36.8495 32.652 35.0255 30.804C33.2015 28.956 32.2895 26.628 32.2895 23.82C32.2895 21.012 33.2015 18.684 35.0255 16.836C36.8495 14.988 39.2255 14.064 42.1535 14.064C45.0815 14.064 47.4455 14.988 49.2455 16.836C51.0695 18.684 51.9815 21.012 51.9815 23.82C51.9815 26.628 51.0695 28.956 49.2455 30.804ZM52.7412 39.192C51.4932 39.192 50.3892 39.096 49.4292 38.904V34.836C50.0772 34.836 50.5452 34.824 50.8332 34.8C51.0972 34.776 51.3852 34.704 51.6972 34.584C52.0332 34.464 52.2492 34.26 52.3452 33.972C52.4652 33.708 52.5252 33.336 52.5252 32.856V14.568H58.3932V33.144C58.3932 35.232 57.9252 36.768 56.9892 37.752C56.0292 38.712 54.6132 39.192 52.7412 39.192ZM52.5252 12.012V7.26001H58.3932V12.012H52.5252ZM68.7688 33.54C65.7928 33.54 63.4048 32.628 61.6048 30.804C59.8288 28.956 58.9408 26.604 58.9408 23.748C58.9408 20.964 59.8168 18.648 61.5688 16.8C63.3448 14.952 65.6248 14.028 68.4088 14.028C70.9288 14.028 73.0288 14.796 74.7088 16.332C76.9168 18.348 77.9968 21.336 77.9488 25.296H64.7008C64.8928 26.568 65.3368 27.564 66.0328 28.284C66.7288 28.98 67.6648 29.328 68.8408 29.328C70.3528 29.328 71.3728 28.716 71.9008 27.492H77.6248C77.1928 29.268 76.1608 30.72 74.5288 31.848C72.9208 32.976 71.0008 33.54 68.7688 33.54ZM64.7368 21.804H72.0088C71.9128 20.7 71.5408 19.824 70.8928 19.176C70.2688 18.528 69.4768 18.204 68.5168 18.204C66.4288 18.204 65.1688 19.404 64.7368 21.804ZM87.4373 33.576C84.5093 33.576 82.1453 32.652 80.3453 30.804C78.5453 28.956 77.6453 26.628 77.6453 23.82C77.6453 21.012 78.5333 18.684 80.3093 16.836C82.0853 14.988 84.4133 14.064 87.2933 14.064C89.7413 14.064 91.7453 14.712 93.3053 16.008C94.8653 17.304 95.7773 19.008 96.0413 21.12H90.3893C89.9813 19.296 88.9733 18.384 87.3653 18.384C86.1173 18.384 85.1693 18.864 84.5213 19.824C83.8973 20.784 83.5853 22.116 83.5853 23.82C83.5853 25.5 83.9093 26.82 84.5573 27.78C85.2053 28.716 86.1413 29.184 87.3653 29.184C89.2373 29.184 90.3053 28.128 90.5693 26.016H96.1853C96.1133 28.2 95.2733 30.012 93.6653 31.452C92.0813 32.868 90.0053 33.576 87.4373 33.576ZM103.924 33.216C102.052 33.216 100.6 32.844 99.5674 32.1C98.5594 31.332 98.0554 30.012 98.0554 28.14V18.24H95.6074V14.568H98.0554V8.73601H103.78V14.568H107.128V18.24H103.78V26.88C103.78 27.552 103.948 28.02 104.284 28.284C104.644 28.548 105.16 28.68 105.832 28.68C106.024 28.68 106.276 28.68 106.588 28.68C106.9 28.656 107.08 28.644 107.128 28.644V32.928C106.456 33.12 105.388 33.216 103.924 33.216Z" fill="#002033"/>
  <path d="M126.52 14.52C132.04 14.52 134.12 16.08 134.12 19.4V27.72C134.12 28.68 134.4 29.28 135.16 29.28C135.56 29.28 136.12 29.08 136.6 28.8L136.92 30.76C135.8 32.44 134.08 33.44 132.36 33.44C130.32 33.44 129.08 32.56 128.36 30.76C126.16 32.76 124.52 33.44 122 33.44C118.6 33.44 116.28 31.76 116.28 29.32C116.28 25.72 120.28 24.12 123.48 23.2C125.32 22.68 126.88 22.36 128.36 22V19.04C128.36 17.48 127.32 16.4 125.52 16.4C123.76 16.4 122.56 17.4 122.56 19C122.56 19.44 122.64 19.96 122.84 20.52L117.52 22.2C117.16 21.32 116.96 20.36 116.96 19.56C116.96 16.32 120.16 14.52 126.52 14.52ZM122.52 27.88C122.52 29.36 123.52 30.52 124.8 30.52C125.8 30.52 126.76 30.04 128.36 28.8V23.84L127.12 24.2C124 25.12 122.52 26.04 122.52 27.88ZM142.342 15V26.64C142.342 28.76 143.942 29.76 145.422 29.76C146.382 29.76 147.622 29.36 148.902 28.44V19.88C148.902 18.48 148.022 17.32 146.542 17.16V15.36L154.662 15V26.84C154.662 30 154.942 30.44 157.542 30.44V32.32L150.502 33.36H148.902V30.32C146.462 32.68 144.862 33.44 142.502 33.44C138.422 33.44 136.582 30.96 136.582 27V20.8C136.582 18.4 136.022 17.6 134.302 17.16V15.36L142.342 15ZM170.022 14.52C171.942 14.52 173.502 15.88 173.502 17.32C173.502 17.8 173.302 18.96 172.782 20.16C172.262 21.36 171.622 22 171.022 22C170.502 22 169.822 21.56 168.902 20.72C167.942 19.84 167.422 19.4 166.982 19.4C166.302 19.4 165.542 20 164.862 21.12C164.182 22.2 163.902 23.36 163.902 24V27.72C163.902 30.8 165.302 31.08 167.622 31.12V33H155.262V31.12C157.502 31 158.142 29.84 158.142 27.84V19.8L154.942 17.84V16.64L161.822 14.64H163.902V19.8H163.982C165.782 16.28 167.822 14.52 170.022 14.52ZM181.283 14.52C188.403 14.52 190.963 19.84 190.963 24C190.963 29.16 187.643 33.44 180.843 33.44C174.923 33.44 171.043 29.68 171.043 24.32C171.043 19.36 174.443 14.52 181.283 14.52ZM177.243 22.84C177.243 28.6 178.483 31.56 181.322 31.56C183.443 31.56 184.763 29.76 184.763 26.24C184.763 20.04 183.523 16.4 180.683 16.4C178.323 16.4 177.243 18.36 177.243 22.84ZM204.092 14.52C206.012 14.52 207.572 15.88 207.572 17.32C207.572 17.8 207.372 18.96 206.852 20.16C206.332 21.36 205.692 22 205.092 22C204.572 22 203.892 21.56 202.972 20.72C202.012 19.84 201.492 19.4 201.052 19.4C200.372 19.4 199.612 20 198.932 21.12C198.252 22.2 197.972 23.36 197.972 24V27.72C197.972 30.8 199.372 31.08 201.692 31.12V33H189.332V31.12C191.572 31 192.212 29.84 192.212 27.84V19.8L189.012 17.84V16.64L195.892 14.64H197.972V19.8H198.052C199.852 16.28 201.892 14.52 204.092 14.52ZM215.153 14.52C220.673 14.52 222.753 16.08 222.753 19.4V27.72C222.753 28.68 223.033 29.28 223.793 29.28C224.193 29.28 224.753 29.08 225.233 28.8L225.553 30.76C224.433 32.44 222.713 33.44 220.993 33.44C218.953 33.44 217.713 32.56 216.993 30.76C214.793 32.76 213.153 33.44 210.633 33.44C207.233 33.44 204.913 31.76 204.913 29.32C204.913 25.72 208.913 24.12 212.113 23.2C213.953 22.68 215.513 22.36 216.993 22V19.04C216.993 17.48 215.953 16.4 214.153 16.4C212.393 16.4 211.193 17.4 211.193 19C211.193 19.44 211.273 19.96 211.473 20.52L206.153 22.2C205.793 21.32 205.593 20.36 205.593 19.56C205.593 16.32 208.793 14.52 215.153 14.52ZM211.153 27.88C211.153 29.36 212.153 30.52 213.433 30.52C214.433 30.52 215.393 30.04 216.993 28.8V23.84L215.753 24.2C212.633 25.12 211.153 26.04 211.153 27.88Z" fill="#002033"/>
</svg>
                                </a>

                                <div className="hidden lg:block">
                                    <ul className="flex gap-8 text-sm">
                                        {menuItems.map((item, index) => (
                                            <li key={index}>
                                                <Button asChild
                                                    variant={'link'}
                                                    className="text-muted-foreground hover:text-accent-foreground block duration-150"
                                                >
                                                    <a href={item.href}>
                                                       {item.name}
                                                    </a>
                                                </Button>
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </motion.div>
                )}
            </nav>
        </header>
    )
}
